import './polyfills.server.mjs';
import{c as K}from"./chunk-L7UZB4HM.mjs";import{a as re}from"./chunk-VLNKBWKV.mjs";import{a as ie}from"./chunk-BFCEQTNI.mjs";import{a as ne}from"./chunk-HRXPSE3H.mjs";import{a as v,b as g}from"./chunk-K4MJOIOR.mjs";import{Da as q,H as O,I as l,J as P,Ja as V,La as W,O as _,P as u,R as j,S as n,T as t,Ta as z,U as r,Ua as B,V as E,W as M,Z as T,Za as Z,_a as J,ab as Q,ba as p,ca as h,cb as X,db as Y,ea as H,eb as ee,fb as te,g as I,j as N,ja as c,ka as F,la as U,m as d,ma as $,ua as G}from"./chunk-7BJ56LUI.mjs";import{h as S}from"./chunk-5XUXGTUW.mjs";var oe=(()=>{class e{constructor(){this.title="mangas-web"}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=d({type:e,selectors:[["app-root"]],standalone:!0,features:[c],decls:1,vars:0,template:function(o,s){o&1&&r(0,"router-outlet")},dependencies:[Q]})}}return e})();var ae=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=d({type:e,selectors:[["app-login"]],standalone:!0,features:[c],decls:43,vars:0,consts:[[1,"d-flex","flex-column","h-m-100"],[1,"flex-fill"],[1,"main_section"],[1,"container"],[1,"row"],[1,"col-md-12"],[1,"breadcrumb_wrapper","mt-3"],[1,"breadcrumb_item"],["href","javascript:void(0)"],[1,"card","card-body","border-0","rounded-0","auth_login_wrapper"],[1,"col-md-5"],[1,"fs-5"],[1,"form_wrapper"],[1,"input-group","mb-3"],["id","txt-username",1,"input-group-text"],[1,"fas","fa-users"],["type","text","placeholder","Username","name","txt-username","aria-label","username","aria-describedby","txt-username",1,"form-control"],["id","txt-password",1,"input-group-text"],[1,"fas","fa-lock"],["type","password","placeholder","Password","name","txt-password","aria-label","password","aria-describedby","txt-password",1,"form-control"],[1,"captcher-wrapper","mb-3"],["id","txt-captcher",1,"captchar-text"],["type","text","placeholder","captcher","name","txt-captcher","aria-label","captcher","aria-describedby","txt-captcher",1,"form-control"],[1,"submit-wrapper"],[1,"btn","btn-secondary","btn-lg","w-100"],[1,"d-flex","justify-content-between","align-items-center","mt-2"],["href","javascript:void(0)",1,"text-decoration-none"]],template:function(o,s){o&1&&(n(0,"div",0),r(1,"app-header"),n(2,"main",1)(3,"section",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"a",8),p(10,"Read Manga Online"),t()(),n(11,"div",7)(12,"a",8)(13,"span"),p(14,"Login"),t()()()()(),n(15,"div",5)(16,"div",9)(17,"div",4)(18,"div",10)(19,"h1",11),p(20,"Login your account"),t(),n(21,"form",12)(22,"div",13)(23,"span",14),r(24,"i",15),t(),r(25,"input",16),t(),n(26,"div",13)(27,"span",17),r(28,"i",18),t(),r(29,"input",19),t(),n(30,"div",20)(31,"span",21),p(32,"6076"),t(),r(33,"input",22),t(),n(34,"div",23)(35,"button",24),p(36," SIGN IN "),t()(),n(37,"div",25)(38,"a",26),p(39,"Create an account?"),t(),n(40,"a",26),p(41,"Forgot your password?"),t()()()()()()()()()()(),r(42,"app-footer"),t())},dependencies:[g,v]})}}return e})();var me=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=d({type:e,selectors:[["app-register"]],standalone:!0,features:[c],decls:46,vars:0,consts:[[1,"d-flex","flex-column","h-m-100"],[1,"flex-fill"],[1,"main_section"],[1,"container"],[1,"row"],[1,"col-md-12"],[1,"breadcrumb_wrapper","mt-3"],[1,"breadcrumb_item"],["href","javascript:void(0)"],[1,"card","card-body","border-0","rounded-0","auth_login_wrapper"],[1,"col-md-5"],[1,"fs-5"],[1,"form_wrapper"],[1,"input-group","mb-3"],["id","txt-username",1,"input-group-text"],[1,"fas","fa-users"],["type","text","placeholder","Username","name","txt-username","aria-label","username","aria-describedby","txt-username",1,"form-control"],["id","txt-password",1,"input-group-text"],[1,"fas","fa-lock"],["type","password","placeholder","Password","name","txt-password","aria-label","password","aria-describedby","txt-password",1,"form-control"],["id","txt-display-name",1,"input-group-text"],["type","text","placeholder","display name","name","txt-display-name","aria-label","display-name","aria-describedby","txt-display-name",1,"form-control"],["id","txt-recover-email",1,"input-group-text"],[1,"fas","fa-envelope"],["type","text","placeholder","email to recover password","name","txt-recover-email","aria-label","recover-email","aria-describedby","txt-recover-email",1,"form-control"],[1,"captcher-wrapper","mb-3"],["id","txt-captcher",1,"captchar-text"],["type","text","placeholder","captcher","name","txt-captcher","aria-label","captcher","aria-describedby","txt-captcher",1,"form-control"],[1,"submit-wrapper"],[1,"btn","btn-secondary","btn-lg","w-100"]],template:function(o,s){o&1&&(n(0,"div",0),r(1,"app-header"),n(2,"main",1)(3,"section",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"a",8),p(10,"Read Manga Online"),t()(),n(11,"div",7)(12,"a",8)(13,"span"),p(14,"Register"),t()()()()(),n(15,"div",5)(16,"div",9)(17,"div",4)(18,"div",10)(19,"h1",11),p(20,"Create your Manga Account"),t(),n(21,"form",12)(22,"div",13)(23,"span",14),r(24,"i",15),t(),r(25,"input",16),t(),n(26,"div",13)(27,"span",17),r(28,"i",18),t(),r(29,"input",19),t(),n(30,"div",13)(31,"span",20),r(32,"i",15),t(),r(33,"input",21),t(),n(34,"div",13)(35,"span",22),r(36,"i",23),t(),r(37,"input",24),t(),n(38,"div",25)(39,"span",26),p(40,"6076"),t(),r(41,"input",27),t(),n(42,"div",28)(43,"button",29),p(44," SIGN UP "),t()()()()()()()()()()(),r(45,"app-footer"),t())},dependencies:[g,v]})}}return e})();var ve=()=>["/list-view"],ge=()=>({category:"latest"}),xe=e=>["/manga",e],be=(e,x)=>["/chapter",e,x];function ye(e,x){if(e&1&&(E(0),n(1,"div",26)(2,"a",23),p(3),t(),n(4,"span",27),p(5),t()(),M()),e&2){let i=x.$implicit,o=T().$implicit,s=T();l(2),u("routerLink",$(4,be,i.id,o.id)),l(),H("Chapter ",i.chapter," ",i.chapterTitle,""),l(2),h(s.formatTime(i.updatedAt))}}function Ce(e,x){if(e&1&&(E(0),n(1,"div",14)(2,"div",15),r(3,"img",16),n(4,"span"),p(5),t(),n(6,"span",17)(7,"span",18),p(8),t(),n(9,"span",19),r(10,"i",20),t()()(),n(11,"div",21)(12,"h2",22)(13,"a",23),p(14),t()(),n(15,"span",24),p(16),t(),n(17,"div",25),_(18,ye,6,7,"ng-container",10),t()()(),M()),e&2){let i=x.$implicit;l(3),u("src",i.cover,O)("alt",i.title),l(),j("badge "+i.popularityTag+"_badge"),l(),h(i.popularityTag),l(3),h(i.rating),l(5),u("routerLink",U(10,xe,i.id)),l(),h(i.title),l(2),h(i.author),l(2),u("ngForOf",i.chapters)}}var pe=(()=>{class e{constructor(i){this.mangaService=i,this.latestMangas=[]}ngOnInit(){this.loadLatestMangas()}loadLatestMangas(){this.mangaService.getLatestMangas().subscribe(i=>S(this,null,function*(){let o=new Date,s=yield Promise.all(i.data.map(m=>S(this,null,function*(){let b="https://via.placeholder.com/150",A=m.relationships.find(a=>a.type==="cover_art");if(A)try{let a=yield this.mangaService.getCoverImage(A.id).toPromise();a?.data?.attributes?.fileName&&(b=`https://uploads.mangadex.org/covers/${m.id}/${a.data.attributes.fileName}.256.jpg`)}catch(a){console.error("Error fetching cover:",a)}let D="Unknown",k=m.relationships.find(a=>a.type==="author"||a.type==="artist");if(k)try{D=(yield this.mangaService.getAuthor(k.id).toPromise())?.data?.attributes?.name||"Unknown"}catch(a){console.error("Error fetching author:",a)}let L=[];try{L=(yield this.mangaService.getChapters(m.id,3).toPromise())?.data?.map(f=>({chapter:f.attributes.chapter||"N/A",title:f.attributes.title||"",id:f.id,updatedAt:f.attributes.readableAt||"Unknown Date"}))||[]}catch(a){console.error("Error fetching chapters:",a)}let fe=m.attributes.tags.map(a=>a.attributes.name.en),w=0,R="N/A";try{let a=yield this.mangaService.getStats(m.id).toPromise();w=a?.statistics?.[m.id]?.follows||0;let f=a?.statistics?.[m.id]?.rating?.average||0;R=f?(f/2).toFixed(1):"N/A"}catch(a){console.error("Error fetching stats:",a)}let y="";w>5e4?y="ss":w>1e4&&(y="hot"),(o.getTime()-new Date(m.attributes.createdAt).getTime())/(1e3*60*60*24)<30&&(y="new");let ue=m.attributes.altTitles?.find(a=>a.en)?.en||(m.attributes.altTitles?.length?Object.values(m.attributes.altTitles[0])[0]:"No Title");return{id:m.id,title:m.attributes.title.en||ue,cover:b,author:D,chapters:L,tags:fe,rating:R,popularityTag:y}})));this.latestMangas=s}))}formatTime(i){let o=new Date(i),m=Math.floor((new Date-o)/1e3);if(m<60)return`${m} seconds ago`;if(m<3600)return`${Math.floor(m/60)} min ago`;if(m<86400)return`${Math.floor(m/3600)} hour ago`;if(m<604800)return`${Math.floor(m/86400)} day ago`;let b={year:"numeric",month:"short",day:"numeric"};return o.toLocaleDateString("en-US",b)}static{this.\u0275fac=function(o){return new(o||e)(P(ne))}}static{this.\u0275cmp=d({type:e,selectors:[["app-home"]],standalone:!0,features:[c],decls:20,vars:5,consts:[[1,"d-flex","flex-column","h-m-100"],[1,"flex-fill"],[1,"main_section"],[1,"container"],[1,"row"],[1,"col-md-8"],[1,"listing_panel_wrapper"],[1,"listing_panel_header"],[1,"header_title"],["id","itemsWrapper",1,"listing_panel_body"],[4,"ngFor","ngForOf"],[1,"listing_panel_footer"],["id","loadMore",1,"footer_link",3,"routerLink","queryParams"],[1,"col-md-4"],[1,"listing_panel_item"],[1,"item_img"],["referrerpolicy","no-referrer",1,"img-fluid",3,"src","alt"],[1,"rating"],[1,"content"],[1,"icon"],[1,"fas","fa-star"],[1,"item_content"],[1,"item_title"],[3,"routerLink"],[1,"item_author"],[1,"item_chapter_wrapper"],[1,"item_chapter"],[1,"item_updated_time"]],template:function(o,s){o&1&&(n(0,"div",0),r(1,"app-header"),n(2,"main",1),r(3,"app-top-week"),n(4,"section",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"h3",8),p(11,"READ MANGA ONLINE - LATEST UPDATES"),t()(),n(12,"div",9),_(13,Ce,19,12,"ng-container",10),t(),n(14,"div",11)(15,"a",12),p(16," << MORE>> "),t()()()(),n(17,"div",13),r(18,"app-sidebar"),t()()()()(),r(19,"app-footer"),t()),o&2&&(l(13),u("ngForOf",s.latestMangas),l(2),u("routerLink",F(3,ve))("queryParams",F(4,ge)))},dependencies:[g,v,W,V,ie,te,Y,re]})}}return e})();var le=(()=>{class e{constructor(i){this.router=i}canActivate(){let i=!!localStorage.getItem("token");return i||this.router.navigate(["/login"]),i}static{this.\u0275fac=function(o){return new(o||e)(N(X))}}static{this.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var se=[{path:"",component:pe},{path:"login",component:ae},{path:"register",component:me},{path:"bookmark",loadComponent:()=>import("./chunk-4GHA3UZ3.mjs").then(e=>e.BookmarkComponent),canActivate:[le]},{path:"chapter/:id/:mangaid",loadComponent:()=>import("./chunk-NAN3WHAS.mjs").then(e=>e.ChapterComponent)},{path:"manga/:id",loadComponent:()=>import("./chunk-3B3MRLA6.mjs").then(e=>e.DetailViewComponent)},{path:"latest-manga",loadComponent:()=>import("./chunk-HOYYS7XT.mjs").then(e=>e.LatestMangaComponent)},{path:"list-view",loadComponent:()=>import("./chunk-EC6MPATO.mjs").then(e=>e.ListViewComponent)},{path:"new-manga",loadComponent:()=>import("./chunk-YSK2FYZ3.mjs").then(e=>e.NewMangaComponent)},{path:"top-manga",loadComponent:()=>import("./chunk-U3CF55IV.mjs").then(e=>e.TopMangaComponent)},{path:"**",redirectTo:""}];var de={providers:[G({eventCoalescing:!0}),ee(se),J(),z(B())]};var we={providers:[K()]},ce=q(de,we);var Se=()=>Z(oe,ce),mt=Se;export{mt as a};
