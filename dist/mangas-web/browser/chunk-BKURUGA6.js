import{a as z}from"./chunk-TUGNCIOV.js";import{$ as V,B as u,C as s,F as r,G as a,H as y,I as M,J as T,K as W,L as C,M as p,N as O,O as I,P,Q as c,S as h,Y as E,_ as F,c as g,ha as A,ia as L,ja as N,m as S,q as x,r as v,ta as R,v as w,va as j,w as o,x as b}from"./chunk-U6WCF6FZ.js";var D=["slider"],Q=t=>["/manga",t],$=(t,d)=>["/chapter",t,d];function U(t,d){if(t&1&&(r(0,"span"),c(1),a()),t&2){let e=p().$implicit;o(),h(": ",e.chapterTitle,"")}}function q(t,d){if(t&1&&(r(0,"div",14),y(1,"img",15),r(2,"div",16)(3,"h3",17)(4,"a",18),c(5),a()(),r(6,"p",19)(7,"a",18),c(8),u(9,U,2,1,"span",1),a()()()()),t&2){let e=d.$implicit;o(),s("src",e.cover,w)("alt",e.title),o(3),s("routerLink",F(7,Q,e.id)),o(),h(" ",e.title," "),o(2),s("routerLink",V(9,$,e.chapterId,e.id)),o(),h(" Chapter ",e.chapter," "),o(),s("ngIf",e.chapterTitle)}}function B(t,d){if(t&1){let e=W();M(0),r(1,"section",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"span",6),y(6,"i",7),a(),r(7,"h1"),c(8,"Top Week"),a()()(),r(9,"div",8)(10,"div",9)(11,"button",10),C("click",function(){x(e);let i=p();return v(i.scrollSlider("prev"))}),c(12,"\u276E"),a(),r(13,"div",11,0),u(15,q,10,12,"div",12),a(),r(16,"button",13),C("click",function(){x(e);let i=p();return v(i.scrollSlider("next"))}),c(17,"\u276F"),a()()()()(),T()}if(t&2){let e=p();o(15),s("ngForOf",e.topWeeklyManga)}}var Z=(()=>{class t{constructor(e){this.mangaService=e,this.topWeeklyManga=[],this.currentSlide=0}ngOnInit(){this.loadTopWeekly()}loadTopWeekly(){this.mangaService.getTopWeekly().subscribe(e=>g(this,null,function*(){let n=yield Promise.all(e.data.map(i=>g(this,null,function*(){let l=i.relationships.find(_=>_.type==="cover_art"),m="https://via.placeholder.com/150";if(l){let _=yield this.mangaService.getCoverImage(l.id).toPromise();_?.data?.attributes?.fileName&&(m=`https://uploads.mangadex.org/covers/${i.id}/${_.data.attributes.fileName}.256.jpg`)}let k=yield this.mangaService.getLatestChapter(i.id).toPromise(),f=k?.data?.[0]?.attributes||{};return{id:i.id,title:i.attributes.title.en||"Untitled",cover:m,chapterId:k?.data?.[0]?.id,chapter:f.chapter||"N/A",chapterTitle:f.title||"",updatedAt:f.readableAt||""}})));this.topWeeklyManga=n}))}autoSlide(){this.slideTimer=setInterval(()=>{this.nextSlide()},5e3)}nextSlide(){this.currentSlide=(this.currentSlide+1)%this.topWeeklyManga.length}prevSlide(){this.currentSlide=(this.currentSlide-1+this.topWeeklyManga.length)%this.topWeeklyManga.length}ngAfterViewInit(){}scrollSlider(e){if(!this.slider)return;let n=this.slider.nativeElement,i=n.querySelector(".slider_item");if(!i)return;let l=i.offsetWidth,m=e==="next"?l:-l;n.scrollBy({left:m,behavior:"smooth"})}goToSlide(e){this.currentSlide=e,clearInterval(this.slideTimer),this.autoSlide()}static{this.\u0275fac=function(n){return new(n||t)(b(z))}}static{this.\u0275cmp=S({type:t,selectors:[["app-top-week"]],viewQuery:function(n,i){if(n&1&&O(D,5),n&2){let l;I(l=P())&&(i.slider=l.first)}},standalone:!0,features:[E],decls:1,vars:1,consts:[["slider",""],[4,"ngIf"],[1,"hero_section","mt-3"],[1,"container"],[1,"section_heading"],[1,"heading"],[1,"icon"],[1,"fas","fa-thumbs-up"],[1,"section_content"],[1,"slider_container"],[1,"controls","prev",3,"click"],[1,"slider_wrapper"],["class","slider_item",4,"ngFor","ngForOf"],[1,"controls","next",3,"click"],[1,"slider_item"],["referrerpolicy","no-referrer",1,"slider_img",3,"src","alt"],[1,"slider_caption"],[1,"item_title"],[1,"chapter_link",3,"routerLink"],[1,"item_text"]],template:function(n,i){n&1&&u(0,B,18,1,"ng-container",1),n&2&&s("ngIf",i.topWeeklyManga.length>0)},dependencies:[N,A,L,j,R],styles:[".slider_container[_ngcontent-%COMP%]{overflow:hidden;width:100%;margin:auto}.slider_wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;overflow-x:auto;scroll-behavior:smooth;gap:12px;padding:10px 0;scroll-snap-type:x mandatory;scrollbar-width:none;-ms-overflow-style:none}.slider_wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.slider_item[_ngcontent-%COMP%]{flex:0 0 50%;box-sizing:border-box}.slider_img[_ngcontent-%COMP%]{width:100%;border-radius:12px}@media (min-width: 763px){.slider_item[_ngcontent-%COMP%]{flex:0 0 33.3333%}}@media (min-width: 992px){.slider_item[_ngcontent-%COMP%]{flex:0 0 25%}}@media (min-width: 1000px){.slider_item[_ngcontent-%COMP%]{flex:0 0 12.5%}}.controls[_ngcontent-%COMP%]{position:absolute;top:50%;display:flex;justify-content:space-between;transform:translateY(-50%)}.controls[_ngcontent-%COMP%]{background:#00000080;color:#fff;border:none;font-size:20px;cursor:pointer;border-radius:50%;z-index:99;width:40px;height:40px;display:flex;align-items:center;justify-content:center}.controls.prev[_ngcontent-%COMP%]{left:1%}.controls.next[_ngcontent-%COMP%]{right:1%}"]})}}return t})();export{Z as a};
