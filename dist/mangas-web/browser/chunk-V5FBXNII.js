import{a as q}from"./chunk-TUGNCIOV.js";import{$ as A,B as h,C as n,F as a,G as r,H as L,I as g,J as v,M as S,Q as s,R as M,S as T,Y as k,Z as l,_ as x,c as _,ha as P,ia as I,ja as N,m as w,ta as O,v as E,va as G,w as i,x as F}from"./chunk-U6WCF6FZ.js";var R=t=>["/manga",t],u=()=>["/list-view"],W=()=>({category:"latest"}),$=()=>({category:"newest"}),U=()=>({category:"top-view"}),j=()=>({status:"all"}),z=()=>({status:"completed"}),V=()=>({status:"ongoing"}),B=(t,p)=>({genres:t,genrenames:p});function H(t,p){if(t&1&&(a(0,"span"),s(1),r()),t&2){let e=S().$implicit;i(),T(": ",e.chapterTitle,"")}}function J(t,p){if(t&1&&(g(0),a(1,"li",7)(2,"a",8)(3,"span",9),s(4),r(),s(5," - "),a(6,"span",9),s(7),h(8,H,2,1,"span",0),r()()(),v()),t&2){let e=p.$implicit;i(2),n("routerLink",x(4,R,e.id)),i(2),M(e.title),i(3),T("Chapter ",e.chapter," "),i(),n("ngIf",e.chapterTitle)}}function K(t,p){if(t&1&&(g(0),a(1,"section",1)(2,"div",2)(3,"div",3)(4,"h1"),s(5,"MOST POPULAR MANGA"),r()()(),a(6,"div",4)(7,"ul",5),h(8,J,9,6,"ng-container",6),r()()(),v()),t&2){let e=S();i(8),n("ngForOf",e.topAllTimeManga)}}function Q(t,p){if(t&1&&(g(0),a(1,"div",7)(2,"a",8),L(3,"img",14),r()(),v()),t&2){let e=p.$implicit;i(2),n("routerLink",x(3,R,e.id)),i(),n("src",e.cover,E)("alt",e.title)}}function X(t,p){if(t&1&&(g(0),a(1,"section",10)(2,"div",2)(3,"div",3)(4,"h1"),s(5,"New Manga"),r()()(),a(6,"div",4)(7,"div",11),h(8,Q,4,5,"ng-container",6),r()(),a(9,"div",12)(10,"button",13),s(11," << MORE>> "),r()()(),v()),t&2){let e=S();i(8),n("ngForOf",e.newMangaWeeklyManga)}}function Y(t,p){if(t&1&&(g(0),a(1,"li",25)(2,"a",18),s(3),r()(),v()),t&2){let e=p.$implicit;i(),n("id",e.id),i(),n("routerLink",l(4,u))("queryParams",A(5,B,e.id,e.name)),i(),T(" ",e.name," ")}}function Z(t,p){if(t&1&&(g(0),a(1,"section",15)(2,"div",2)(3,"div",3)(4,"h1"),s(5,"Manga by Genres"),r()()(),a(6,"div",4)(7,"ul",16)(8,"li",17)(9,"a",18),s(10," Latest "),r()(),a(11,"li",19)(12,"a",18),s(13," Newest "),r()(),a(14,"li",20)(15,"a",18),s(16," Top View "),r()()(),a(17,"ul",16)(18,"li",21)(19,"a",18),s(20," ALL "),r()(),a(21,"li",22)(22,"a",18),s(23," Completed "),r()(),a(24,"li",23)(25,"a",18),s(26," Ongoing "),r()()(),a(27,"ul",24),h(28,Y,4,8,"ng-container",6),r()()(),v()),t&2){let e=S();i(9),n("routerLink",l(15,u))("queryParams",l(16,W))("routerLink",l(17,u)),i(3),n("routerLink",l(18,u))("queryParams",l(19,$))("routerLink",l(20,u)),i(3),n("routerLink",l(21,u))("queryParams",l(22,U)),i(4),n("routerLink",l(23,u))("queryParams",l(24,j)),i(3),n("routerLink",l(25,u))("queryParams",l(26,z)),i(3),n("routerLink",l(27,u))("queryParams",l(28,V)),i(3),n("ngForOf",e.mangaGenresList)}}var oe=(()=>{class t{constructor(e){this.mangaService=e,this.mangaGenresList=[],this.topAllTimeManga=[],this.newMangaWeeklyManga=[]}ngOnInit(){this.loadGenresList(),this.loadTopAllTime(),this.loadNewMangaWeekly()}loadGenresList(){this.mangaService.getGenresList().subscribe(e=>_(this,null,function*(){let m=yield Promise.all(e.data.map(o=>_(this,null,function*(){return{id:o.id,name:o.attributes.name.en}})));this.mangaGenresList=m,console.log(this.mangaGenresList)}))}loadTopAllTime(){this.mangaService.getTopAllTime().subscribe(e=>_(this,null,function*(){let m=yield Promise.all(e.data.map(o=>_(this,null,function*(){let f=(yield this.mangaService.getLatestChapter(o.id).toPromise())?.data?.[0]?.attributes||{},b=o.attributes.altTitles?.length>0?o.attributes.altTitles.find(y=>y.en)?o.attributes.altTitles.find(y=>y.en).en:Object.values(o.attributes.altTitles[0])[0]:"No Title";return{id:o.id,title:o.attributes.title.en||b,chapter:f.chapter||"N/A",chapterTitle:f.title||"",updatedAt:f.readableAt||""}})));this.topAllTimeManga=m,console.log(this.topAllTimeManga)}))}loadNewMangaWeekly(){this.mangaService.getNewMangaWeekly().subscribe(e=>_(this,null,function*(){let m=new Date,o=yield Promise.all(e.data.map(d=>_(this,null,function*(){let f="https://via.placeholder.com/150",b=d.relationships.find(c=>c.type==="cover_art");if(b)try{let c=yield this.mangaService.getCoverImage(b.id).toPromise();c?.data?.attributes?.fileName&&(f=`https://uploads.mangadex.org/covers/${d.id}/${c.data.attributes.fileName}.256.jpg`)}catch(c){console.error("Error fetching cover:",c)}let y="Unknown",C=d.relationships.find(c=>c.type==="author"||c.type==="artist");if(C)try{y=(yield this.mangaService.getAuthor(C.id).toPromise())?.data?.attributes?.name||"Unknown"}catch(c){console.error("Error fetching author:",c)}let D=d.attributes.altTitles?.find(c=>c.en)?.en||(d.attributes.altTitles?.length?Object.values(d.attributes.altTitles[0])[0]:"No Title");return{id:d.id,title:d.attributes.title.en||D,cover:f}})));this.newMangaWeeklyManga=o}))}static{this.\u0275fac=function(m){return new(m||t)(F(q))}}static{this.\u0275cmp=w({type:t,selectors:[["app-sidebar"]],standalone:!0,features:[k],decls:3,vars:3,consts:[[4,"ngIf"],[1,"most_popular_section"],[1,"section_heading"],[1,"heading"],[1,"section_content"],["id","most_popular_list",1,"most_popular_list"],[4,"ngFor","ngForOf"],[1,"list_item"],[3,"routerLink"],[1,"list_item_title"],[1,"new_arrival_section"],["id","new_arrival_list",1,"new_arrival_list"],[1,"section_footer"],["type","button",1,"footer_link"],["referrerpolicy","no-referrer",1,"img-fluid",3,"src","alt"],[1,"genres_section"],[1,"genres_list","border-bottom"],["id","sort_latest",1,"list_item","sort_latest"],[3,"routerLink","queryParams"],["id","sort_newest",1,"list_item","sort_newest"],["id","sort_top-view",1,"list_item","sort_top-view"],["id","status_all",1,"list_item","status_all"],["id","status_completed",1,"list_item","status_completed"],["id","status_ongoing",1,"list_item","status_ongoing"],["id","genres_list_container",1,"genres_list"],[1,"list_item",3,"id"]],template:function(m,o){m&1&&h(0,K,9,1,"ng-container",0)(1,X,12,1,"ng-container",0)(2,Z,29,29,"ng-container",0),m&2&&(n("ngIf",o.topAllTimeManga.length>0),i(),n("ngIf",o.topAllTimeManga.length>0),i(),n("ngIf",o.mangaGenresList.length>0))},dependencies:[N,P,I,G,O]})}}return t})();export{oe as a};
